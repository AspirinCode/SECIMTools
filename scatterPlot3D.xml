<tool id="scatterPlot3d" name="3D Scatter Plot">
    <description>Create a 3D scatter plot.</description>
    <requirements>
        <requirement type="python-module">pandas</requirement>
        <requirement type="python-module">matplotlib</requirement>
    </requirements>
    <command interpreter="python">scatterPlot3D.py --input $input --ID $uniqID
        #if $design and $group
        --design $design
        --group $group
        #end if

        --xaxis $xaxis
        --yaxis $yaxis
        --zaxis $zaxis

        #if "$title"
            --title "$title"
        #end if

        #if $xname
            --xname $xname
        #end if
        #if $yname
            --yname $yname
        #end if
        #if $zname
        --zname $zname
        #end if

        --fig $fig
    </command>
    <inputs>
        <param name="input" type="data" format="tabular" label="Tall Dataset"
               help="Input dataset in tall format (see help section below) and tab separated. If not tab separated see TIP below."/>
        <param name="uniqID" size="30" type="text" value="featureID" label="Feature ID"
               help="Name of the column in your Tall Dataset that has unique feature/compound/gene IDs."/>
        <param name="xaxis" type="text" size="30" value="" label="Column name with X-value"/>
        <param name="yaxis" type="text" size="30" value="" label="Column name with Y-value"/>
        <param name="zaxis" type="text" size="30" value="" label="Column name with Z-value"/>
        <param name="title" type="text" size="30" value="" optional="true" label="Plot title [Optiona]."/>
        <param name="design" type="data" format="tabular" optional="true" label="Metadata File [Optional]."
               help="Metadata file tab separated. Note you need a 'sampleID' column. If not tab separated see TIP below"/>
        <param name="group" type="text" size="30" value="" optional="true" label="Group/Treatment [Optional]"
               help="Name of the column in your Metadata File that contains group classifications."/>
        <param name="xname" type="text" size="30" value="" optional="true" label="X-axis label [Optional]."/>
        <param name="yname" type="text" size="30" value="" optional="true" label="Y-axis label [Optional]."/>
        <param name="zname" type="text" size="30" value="" optional="true" label="Y-axis label [Optional]."/>
    </inputs>
    <outputs>
        <data format="png" name="fig"/>
    </outputs>
    <macros>
        <import>macros.xml</import>
    </macros>
    <tests>
        <test>
            <param name="input" value="./test-data/test_data.tsv" />
            <param name="design" value="./test-data/test_design.csv" />
            <param name="uniqID" value="rowID" />
            <param name="group" value="treatment" />
            <param name="xaxis" value="PC1" />
            <param name="yaxis" value="PC2" />
            <param name="zaxis" value="PC3" />
            <output name="fig" file="./test-data/test_scatterPlot3D.png" />
        </test>
    </tests>
<help>

@TIP_AND_WARNING@

**What it does**

Generates a 3D scatter plot.

--------------------------------------------------------------------------------

**Input**

**A Tall Formatted Dataset:**
A tall formatted dataset that contains measurements for each sample.::

   +----------+-----+-----+-----+-----+
    | sampleID | featureID  | peak area|
    +==========+=====+=====+=====+=====+
    | sample1  |     1     |    20     |
    | sample1  |     2     |    22     |
    | sample1  |     3     |    27     |
    | sample2  |     1     |    18     |
    | sample2  |     2     |    21     |
    | sample2  |     3     |    24     |
    |  ...     |     ...   |    ...    |
    +----------+-----+-----+-----+-----+

    **NOTE:** The sample IDs must match the sample IDs in the Metadata File (below) and Feature IDs must be unique.

**FeatureID**

- The column name in your Tall format dataset that contains the unique feature/compound IDs.

**Column name with X-value**

- The column name in your tall dataset that contains the x-value you want to plot (i.e., x1 or PC1)

**Column name with Y-value**

- The column name in your tall dataset that contains the y-value you want to plot (i.e., y1 or PC2)

**Column name with Z-value**

- The column name in your tall dataset that contains the z-value you want to plot (i.e., z1 or PC3)


**Plot title**  [Optional]

- Title to display on your plot.


**A Metadata Dataset:**
A metatdata file relating samples to various groups or treatments.::

    +----------+--------+---------+
    | sampleID | group1 | runOrder|
    +==========+========+=========+
    | sample1  | g1     | 2       |
    | sample2  | g1     | 3       |
    | sample3  | g1     | 6       |
    | sample4  | g2     | 1       |
    | sample5  | g2     | 5       |
    | sample6  | g2     | 4       |
    | ...      | ...    | . . .   |
    +----------+--------+---------+

    **NOTE: You must have a column named *sampleID***
    and the values in this column must match the SampleIDs in the tall
    formatted dataset.



@GROUP_OPTIONAL@


**X-axis label**   [Optional]

- Label to put on the X-axis

**Y-axis label**  [Optional]

- Label to put on the Y-axis

**Z-axis label**  [Optional]

- Label to put on the Z-axis

------------------------------------------------------------------------------

**Output Files**

**3Dscatterplot**:: is a PDF of a 3D scatterplot.ot.

</help>
</tool>

