<tool id="mergeFlags2" name="Merge Flags (Beta)" version="2.1.0">
    <description>Merge flags with same index together.</description>
    <requirements>
        <requirement type="python-module">pandas</requirement>
    </requirements>
    <command interpreter="python">mergeFlags.py
        --input "$input"
        --output "$output"
        #set names = '" "'.join( [ str( $i.display_name ) for $i in $input ] )
        --filename "${names}"
        #if $flagUniqID
        --flagUniqID $flagUniqID
        #end if
    </command>
    <inputs>
        <param name="input" format="tabular" type="data"  label="Wide Dataset" multiple="true"
               help="Input dataset in wide format and tab separated.CTRL+CLICK to select multiple.
               If not tab separated see TIP below." />
        <param name="flagUniqID" type="text" size="30" value="" label="Unique ID for Flag file (feature ID or sample ID)" help="Name of the column in your Flag file that has unique Feature IDs."/>
    </inputs>
    <outputs>
        <data format="tabular" name="output" label="${tool.name} on ${on_string}: Flags"/>
    </outputs>
    <macros>
        <import>macros.xml</import>
    </macros>
<help>

@TIP_AND_WARNING@

**Tool Description**

This tool takes in any number of flag files containing the same index and merges them
together into one easy-to-read table.  Since merging is done by index (e.g. 'Feature'),
all files must contain the same index.  Flag files can also be merged to Wide Format datasets.

--------------------------------------------------------------------------------

**Input**


- Two or more datasets are required.

    **Flags File:**

    A flag file corresponding to flagged values of of the wide and design files.::

        +----------+---------+---------+--------+-----+
        | Feature  | flag1   | flag2   | flag3  | ... |
        +==========+=========+=========+========+=====+
        | one      | 0       | 0       | 1      | ... |
        | two      | 0       | 0       | 0      | ... |
        | three    | 0       | 1       | 0      | ... |
        | four     | 0       | 1       | 0      | ... |
        |  ...     | ...     | ...     | ...    | ... |
        +----------+---------+---------+---------+-----+



    - Indexes (e.g. Feature column) must be the same for the data sets.

    **In addition to your flag datasets, you may provide an optional dataset:**

    **Wide Formatted Dataset:** [Optional]

    A wide formatted dataset that contains measurements for each sample.::

        +----------+---------+---------+---------+-----+
        | Features | sample1 | sample2 | sample3 | ... |
        +==========+=========+=========+=========+=====+
        | one      | 10      | 20      | 10      | ... |
        | two      | 5       | 22      | 30      | ... |
        | three    | 30      | 27      | 2       | ... |
        | four     | 32      | 17      | 8       | ... |
        | ...      | ...     | ...     | ...     | ... |
        +----------+---------+---------+---------+-----+

--------------------------------------------------------------------------------

**Output**

- A TSV file containing all merged data sets.


</help>
</tool>
