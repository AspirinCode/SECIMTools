<tool id="clean" name="Clean Data Names">
    <description>Clean string names to avoid characters that could break Galaxy tools</description>
    <requirements>
        <!--Not sure about these requirements. Does it need all of the requirements that interface.py needs?-->
        <requirement type="python-module">numpy</requirement>
        <requirement type="python-module">pandas</requirement>
    </requirements>
    <command interpreter="python">clean.py
        --input $input
        --design $design
        --ID $uniqID
        --wideOut $wideOut
        --designOut $designOut
    </command>
    <inputs>
        <param name="input" type="data" format="tabular" label="Wide Dataset" help="Input dataset in wide format and tab separated. If not tab separated see TIP below."/>
        <param name="design" type="data" format="tabular" label="Metadata File" help="Metadata file tab separated. Note you need a 'sampleID' column. If not tab separated see TIP below"/>
        <param name="uniqID" type="text" size="30" value="" label="Unique Compound ID" help="Name of the column in your Wide Dataset that has unique compound/gene IDs."/>
    </inputs>
    <outputs>
        <data format="tabular" name="wideOut" label="Wide data" />
        <data format="tabular" name="designOut" label="Metadata" />
    </outputs>
    <!--<tests>-->
        <!--<test>-->
            <!--<param name="input" value="ST000015_log.tsv" />-->
            <!--<param name="design" value="ST000015_design.tsv" />-->
            <!--<param name="ID" value="Name" />-->
            <!--<output name="wideOut" file="clean-wideOut-test" ftype="tabular" />-->
            <!--<output name="designOut" file="clean-designOut-test" ftype="tabular" />-->
            <!--</test>-->
    <!--</tests>-->
<help>
.. class:: infomark

**TIP:** 
If your data is not TAB delimited, use *Text Manipulation-&gt;Convert*

--------------------------------------------------------------------------------

**What it does**

This tool 'cleans' string names to avoid characters that could break one of the SECIM Galaxy Tools.   

--------------------------------------------------------------------------------

**Input**

- Two input datasets are required.

      **Wide Formatted Dataset:**

    A wide formatted dataset that contains measurements for each sample.::

        +----------+---------+---------+---------+-----+
        | Compound | sample1 | sample2 | sample3 | ... |
        +==========+=========+=========+=========+=====+
        | one      | 10      | 20      | 10      | ... |
        | two      | 5       | 22      | 30      | ... |
        | three    | 30      | 27      | 2       | ... |
        | four     | 32      | 17      | 8       | ... |
        | ...      | ...     | ...     | ...     | ... |
        +----------+---------+---------+---------+-----+

    **NOTE:** The sample IDs must match the sample IDs in the Design File (below). 
    Extra columns will automatically be ignored.


    **Metadata File:**
    A Metadata file relating samples to various groups/treatment.::

        +----------+--------+
        | sampleID | group1 |
        +==========+========+
        | sample1  | g1     |
        | sample2  | g1     |
        | sample3  | g1     |
        | sample4  | g2     |
        | sample5  | g2     |
        | sample6  | g2     |
        | ...      | ...    |
        +----------+--------+

    **NOTE: You must have a column named *sampleID***
    and the values in this column must match the columns names in the wide
    formatted dataset. Extra columns will be ignored.

    **In addition to your datasets, you need to provide:**

    **Unique Compound ID**

    - The column name in your wide dataset that contains the unique IDs for
      your compounds. In our example dataset you would input *Compound*

--------------------------------------------------------------------------------

**Output Files**

- This tool outputs 2 files where common illegal characters (e.g. slashes, spaces, pound, etc.)
  have been removed from (1) the 'Unique Compound ID' in the wide dataset and (2) the 'sampleID' column in the metadata file. 
</help>
</tool>
