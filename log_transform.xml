<tool id="log_transform" name="Log Transformation">
    <description>Transform your data using the log.</description>
    <requirements>
        <requirement type="python-module">numpy</requirement>
        <requirement type="python-module">pandas</requirement>
        <requirement type="python-module">mpld3</requirement>
        <requirement type="python-module">interface</requirement>
        <requirement type="python-module">logger</requirement>
    </requirements>
    <command interpreter="python">log_transform.py
        --input $input
        --design $design
        --ID $uniqID
        --log $log
        --out $out
    </command>
    <inputs>
        <param name="input" type="data" format="tabular" label="Wide Dataset" help="Input dataset in wide format and tab separated. If file is not tab separated see TIP below."/>
        <param name="design" type="data" format="tabular" label="Metadata File" help="Metadata file tab separated. Note you need a 'sampleID' column. If not tab separated see TIP below"/>
        <param name="uniqID" size="30" type="text" value="" label="Unique Feature ID" help="Name of the column in your Wide Dataset that has unique feature/compound/gene IDs."/>
        <param name="log" size="30" type="select" value="" label="Log Transformation" help="Select type of log.">
            <option value="log" selected="true">Natural Log</option>
            <option value="log2" selected="true">log base 2</option>
            <option value="log10" selected="true">log base 10</option>
        </param>
    </inputs>
    <outputs>
        <data format="tabular" name="out" />
    </outputs>
    <macros>
        <import>macros.xml</import>
    </macros>
    <tests>
        <test>
            <param name="input" value="./test-data/test_data.tsv" />
            <param name="design" value="./test-data/test_design.csv" />
            <param name="uniqID" value="rowID" />
            <param name="log" value="log" />
            <output name="out" file="./test-data/test_log_transform_out.tsv" />
        </test>
    </tests>
<help>

    @TIP_AND_WARNING@

**What it does**

This tool carries out a log transformation on values in a Wide Format dataset.


--------------------------------------------------------------------------------

**Input**

- Two input datasets are required.

    @WIDE@

    **NOTE:** The sample IDs must match the sample IDs in the Metadata File (below).
    Extra columns will automatically be ignored.


    @METADATA@

    **In addition to your datasets, you need to provide:**

    **Unique Feature ID**

    - The column name in your wide dataset that contains the unique IDs for
      your features. In our example dataset you would input *Feature*

      @GROUP@

    **The base which to calculate the logarithm**

    - Choices are the base 10 and base 2 log, as well as the natrual log.

--------------------------------------------------------------------------------

**Output Files**

- This tool outputs a TSV file of the log transformed data. Missing values
  remain missing and 0 values become missing.


</help>
</tool>

