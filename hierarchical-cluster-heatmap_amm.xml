<tool id="hierarchical-cluster-heatmap" name="Hierarchical Cluster Heatmap" version="0.0.1">
  <description> </description>
  <requirements>
    <requirement type="python-module">matplotlib</requirement>
    <requirement type="python-module">scipy</requirement>
  </requirements>
  <command interpreter="python">
    hierarchical-cluster-heatmap_amm.py 
      --i $input1
      --d $design
      --g $group
      --a $anno
      --c $cmpd
      --n $a_col
      --o1 $out_file1
  </command>
  <inputs>
    <param format="tabular" name="input1" type="data" label="Select wide format data set." help="Dataset missing? See TIP below."/>
    <param format="tabular" name="design" type="data" label="Select Metadata file." help="Dataset missing? See TIP below."/>
    <param name="group" type="text" label="Group/Treatment column in Metadata File to color samples by" help="Name of column in Metadata file containing group categories."/>
    <param format="tabular" name="anno" type="data" optional="true" label="Optional - Select Annotation File." help="Dataset missing? See TIP below."/>
    <param name="cmpd" type="text" optional="true" label="Column containing unique Compound IDs in Annotation File" help="Name of column in Annotation File containing unique compound IDs."/>
    <param name="a_col" type="text" optional="true" label="Column containing annotations to color compounds by." help="Name of the column in the annotation data set that contains the annotations for each unique compound/gene ID."/>
  </inputs>
  <outputs>
    <data format="png" name="out_file1" />
  </outputs>
<help>

.. class:: infomark

**TIP:** If your data is not TAB delimited, use *Edit Datasets-&gt;Convert characters*

.. class:: warningmark

**WARNINGS:**

    - (1) A row will be dropped when a pairwise comparison has a missing value.
    - (2) This script automatically removes spaces and special characters from strings.
    - (3) If a compound name starts with a number it will prepend an '_'.

--------------------------------------------------------------------------------

**What it does**

This tool generates a Hierarchical Cluster Heatmap from a Wide Formated
dataset, a Metadata dataset and an optional Annotation dataset.

--------------------------------------------------------------------------------


**Input**

- Two input datasets are required.

    **Wide Formatted Dataset:**

    A wide formatted dataset that contains measurements for each sample.::

        +----------+---------+---------+---------+-----+
        | Compound | sample1 | sample2 | sample3 | ... |
        +==========+=========+=========+=========+=====+
        | one      | 10      | 20      | 10      | ... |
        | two      | 5       | 22      | 30      | ... |
        | three    | 30      | 27      | 2       | ... |
        | four     | 32      | 17      | 8       | ... |
        | ...      | ...     | ...     | ...     | ... |
        +----------+---------+---------+---------+-----+

    **NOTE:** The sample IDs must match the sample IDs in the Metadata File (below).
    Extra columns will automatically be ignored.


    **Metadata File:**

    A Metadata file relating samples to various groups/treatment.::

        +----------+--------+
        | sampleID | group1 |
        +==========+========+
        | sample1  | g1     |
        | sample2  | g1     |
        | sample3  | g1     |
        | sample4  | g2     |
        | sample5  | g2     |
        | sample6  | g2     |
        | ...      | ...    |
        +----------+--------+

    **NOTE: You must have a column named *sampleID*** and the values in this
    column must match the column names in the wide formatted dataset. Extra
    columns will be ignored.

    **In addition to your datasets, you need to provide:**

    **Group/Treatment** [Optional]

    - The column name in your metadata file that contains group information. In
      our example metadata file we would put *group1*. If provided, samples will
      be colored by group.

    **Unique Compound ID**

    - The column name in your wide dataset that contains the unique IDs for
      your compounds. In our example dataset you would input *Compound*


**Optional Annotation File:**

     Used to generate a feature color bar.

    An Annotation File relating features to pathways of interest::

        +------------+------------+
        | Compound   | annotation |
        +============+============+
        | compound1  |    a1      |
        | compound2  |    a1      |
        | compound3  |    a1      |
        | compound4  |    a2      |
        +----------+--------------+

      **Note:** The feature names in the Annotation file must match the feature
      names in the Wide Format Dataset.

--------------------------------------------------------------------------------

**Output Files**

- This tool outputs a PNG image of the hierarchical heat map

</help>
</tool>
